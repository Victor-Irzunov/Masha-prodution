(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1272],{47115:function(t,e,a){Promise.resolve().then(a.bind(a,36891))},36891:function(t,e,a){"use strict";a.r(e);var i=a(9268),n=a(60612),s=a(92492),r=a(86006),u=a(2337),c=a(15419),l=a(77110),o=a.n(l),d=a(48404),y=a(58514),p=a(65326),h=a.n(p),x=a(97835),f=a(3503),v=a(38145),g=a(1891),m=a(730);a(68610),h().locale("ru");let _=t=>fetch(t).then(t=>t.json());e.default=t=>{let{params:{id:e}}=t,[a,l]=(0,r.useState)(!0),{user:p}=(0,r.useContext)(g.MyContext),{data:w,error:D}=(0,m.ZP)("/api/article/".concat(e),_);if(D)return(0,i.jsx)("div",{children:"Ошибка при загрузке данных."});if(!w)return(0,i.jsx)("div",{children:"Загрузка данных..."});let Z="true"===localStorage.getItem("liked_".concat(e)),j="true"===localStorage.getItem("disliked_".concat(e)),k=t=>{if(Z){u.ZP.error("Вы уже оценили статью");return}(0,y.N)({id:t}).then(e=>{u.ZP.success(e.message),localStorage.setItem("liked_".concat(t),"true")}),l(!1)};return(0,i.jsxs)("section",{className:"pt-10 pb-20 overflow-hidden",children:[(0,i.jsxs)(n.E.div,{initial:"hidden",whileInView:"visible",className:"sd:px-10 xy:px-5",children:[(0,i.jsx)(n.E.h1,{className:"sd:text-6xl xy:text-4xl text-[#191c1d] font-extrabold uppercase",variants:s.gq,children:w.link}),(0,i.jsx)(n.E.h2,{className:"text-white sd:text-4xl xy:text-2xl font-bold sd:mt-10 xy:mt-2",variants:s.uN,children:w.description})]}),(0,i.jsx)("div",{className:"h-20"}),(0,i.jsxs)("article",{className:"sd:px-10 xy:px-5 flex flex-col relative",children:[p.userData&&p.userData.isAdmin&&(0,i.jsx)("div",{className:"absolute -top-4 right-3 text-pink-500",children:w.id}),(0,i.jsx)("div",{children:Object.keys(w).length?(0,d.ZP)(w.article):(0,i.jsx)(c.default,{})}),(0,i.jsxs)("div",{className:"flex justify-between mt-10 sd:flex-row xy:flex-col sd:text-base xy:text-sm",children:[(0,i.jsxs)("p",{className:"font-light",children:["Дата публикации: ",h()(w.dateTime).format("LLL")]}),(0,i.jsx)("p",{className:"italic font-light",children:"Автор: Мария Ирзунова"})]})]}),a?(0,i.jsxs)("div",{className:"sd:px-10 xy:px-5 mt-10",children:[(0,i.jsx)("p",{children:"Статья была интересной?"}),(0,i.jsx)(o(),{icon:(0,i.jsx)(x.Z,{}),className:"mr-4",onClick:()=>k(w.id)}),(0,i.jsx)(o(),{icon:(0,i.jsx)(f.Z,{}),onClick:()=>{if(j){u.ZP.error("Вы уже оценили статью");return}u.ZP.success("Спасибо Вас за оценку!"),localStorage.setItem("disliked_".concat(e),"true"),l(!1)}})]}):(0,i.jsx)("div",{className:"sd:px-10 xy:px-5 mt-5 text-sm",children:(0,i.jsxs)("p",{children:["Мне очень важно Ваше мнение. Спасибо ",(0,i.jsx)(v.Z,{})]})})]})}},92492:function(t,e,a){"use strict";a.d(e,{Zo:function(){return c},_u:function(){return u},bj:function(){return n},gq:function(){return s},k3:function(){return r},uN:function(){return i}});let i={hidden:{x:100,opacity:0},visible:{x:0,opacity:1,transition:{delay:.4,duration:.6}}},n={hidden:{y:100,opacity:0},visible:{y:0,opacity:1,transition:{duration:.9}}},s={hidden:{x:-100,opacity:0},visible:{x:0,opacity:1,transition:{delay:.4,duration:.6}}},r={hidden:{y:100,opacity:0},visible:{y:0,opacity:1,transition:{duration:1,delay:.5}}},u={hidden:{y:100,opacity:0},visible:t=>({y:0,opacity:1,transition:{delay:.2*t,duration:1}})},c={hidden:{y:100,opacity:0},visible:t=>({y:0,opacity:1,transition:{delay:.1*t,duration:.3}})}},1891:function(t,e,a){"use strict";a.r(e),a.d(e,{MyContext:function(){return d},MyContextProvider:function(){return y}});var i=a(9268),n=a(86006),s=a(24357);class r{setData(t){this._data=t}setIsAuth(t){this._isAuth=t}setUser(t){this._user=t}setUserData(t){this._userData=t}get data(){return this._data}get isAuth(){return this._isAuth}get user(){return this._user}get userData(){return this._userData}constructor(){this._data={},this._isAuth=!1,this._user={},this._userData={},(0,s.ky)(this)}}class u{setResDataZapisi(t){this._resDataZapisi=t}setNewOtzyvy(t){this._newOtzyvy=t}setDataZapisi(t){this._dataZapisi=t}get dataZapisi(){return this._dataZapisi}get dataNewOtzyvy(){return this._newOtzyvy}get resDataZapisi(){return this._resDataZapisi}constructor(){this._dataZapisi=[],this._resDataZapisi=[],this._newOtzyvy=[],(0,s.ky)(this)}}var c=a(32728),l=a(47010),o=a(54912);let d=(0,n.createContext)(),y=t=>{let{children:e}=t,[a,s]=(0,n.useState)({}),[y]=(0,n.useState)(new r),[p]=(0,n.useState)(new u),[h,x]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{(0,c.lZ)().then(t=>{y.setUserData(t),t&&(y.setIsAuth(!0),y.setUser(!0))}).catch(t=>{console.log('"\uD83D\uDE80 \uD83D\uDE80 \uD83D\uDE80dataUser err:',t)})},[y]),(0,n.useEffect)(()=>{(0,l.gA)().then(t=>{t.length?p.setDataZapisi(t):console.log("Записей нет")})},[p.resDataZapisi]),(0,n.useEffect)(()=>{(0,o.Dz)().then(t=>{p.setNewOtzyvy(t),t.length&&x(!0)})},[y.userData]),(0,i.jsx)(d.Provider,{value:{state:a,updateState:t=>{s(t)},user:y,dataApp:p,newOtzyvy:h},children:e})}},58514:function(t,e,a){"use strict";a.d(e,{C$:function(){return s},N:function(){return o},_:function(){return c},ne:function(){return r},tL:function(){return u},tu:function(){return n},vV:function(){return l}});var i=a(28005);let n=async t=>{let{data:e}=await i.G.post("api/article/admin",t);return e},s=async t=>{let{id:e}=t,{data:a}=await i.y.get("/api/article/"+e);return a},r=async()=>{let{data:t}=await i.y.get("api/article/all");return t},u=async t=>{let{data:e}=await i.G.put("api/article/admin",t);return e},c=async t=>{let{data:e}=await i.y.delete("api/article/"+t);return e},l=async t=>{let{data:e}=await i.y.put("/api/article/view-article/"+t);return e},o=async t=>{let{id:e}=t,{data:a}=await i.y.put("/api/article/like/"+e);return a}},47010:function(t,e,a){"use strict";a.d(e,{BT:function(){return s},SL:function(){return n},am:function(){return u},gA:function(){return c},tN:function(){return r}});var i=a(28005);let n=async t=>{let{start:e}=t,{data:a}=await i.G.get("api/zapisi/getAllZapisi",{params:{start:e}});return a},s=async t=>{let{data:e}=await i.G.post("/api/zapisi",t);return e},r=async t=>{let{data:e}=await i.G.put("api/zapisi",t);return e},u=async t=>{let{data:e}=await i.G.delete("api/zapisi/"+t);return e},c=async()=>{let{data:t}=await i.y.get("/api/zapisi");return t}},28005:function(t,e,a){"use strict";a.d(e,{G:function(){return s},y:function(){return n}});var i=a(65953);let n=i.Z.create({baseURL:"https://vi-tech.site/"}),s=i.Z.create({baseURL:"https://vi-tech.site/"});s.interceptors.request.use(t=>(t.headers.authorization="Bearer ".concat(localStorage.getItem("token_psy")),t))},54912:function(t,e,a){"use strict";a.d(e,{Dz:function(){return r},RQ:function(){return u},WW:function(){return s},YJ:function(){return n}});var i=a(28005);let n=async t=>{let{data:e}=await i.y.post("/api/otzyvy",t);return e},s=async()=>{let{data:t}=await i.y.get("/api/otzyvy/all");return t},r=async()=>{let{data:t}=await i.G.get("/api/otzyvy");return console.log("\uD83D\uDE80 \uD83D\uDE80 \uD83D\uDE80  _ file: otzyvyAPI.js:13 _ getNewOtzyvy _ data:",t),t},u=async t=>{let{data:e}=await i.G.put("/api/otzyvy",t);return e}},32728:function(t,e,a){"use strict";a.d(e,{c0:function(){return c},l9:function(){return s},lZ:function(){return u},x4:function(){return r}});var i=a(28005),n=a(49477);let s=async(t,e,a)=>{let{data:s}=await i.y.post("/api/user/register",{email:t,password:e,isAdmin:a});return localStorage.setItem("token_psy",s.token),(0,n.Z)(s.token)},r=async(t,e)=>{let{data:a}=await i.y.post("/api/user/login",{email:t,password:e});return localStorage.setItem("token_psy",a.token),(0,n.Z)(a.token)},u=async()=>{let t=localStorage.getItem("token_psy");if(!t)return null;{let e=await (0,n.Z)(t),{data:a}=await i.y.get("/api/user",{params:{id:e.id}});return a}},c=async t=>{let{data:e}=await i.y.get("api/user/reset",{params:{login:t}});return e}}},function(t){t.O(0,[4550,2749,9050,1737,7469,612,2337,7110,6555,5341,9253,7698,1744],function(){return t(t.s=47115)}),_N_E=t.O()}]);